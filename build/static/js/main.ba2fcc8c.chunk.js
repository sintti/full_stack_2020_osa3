(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),u=t.n(a),r=t(13),o=t.n(r),c=t(2),l=(t(19),t(3)),i=t.n(l),s="/api/persons",f=function(){return i.a.get(s).then((function(e){return e.data}))},m=function(e){return i.a.post(s,e).then((function(e){return e.data}))},d=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},h=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return u.a.createElement("form",null,"name: ",u.a.createElement("input",{value:e.newName,onChange:e.handleNameChange}),"number: ",u.a.createElement("input",{value:e.newNumber,onChange:e.handleNumberChange}),u.a.createElement("button",{type:"submit",onClick:e.addPerson},"add"))},b=function(e){return u.a.createElement("form",null,"filter shown with ",u.a.createElement("input",{value:e.newFilter,onChange:e.handleFilterChange}))},v=function(e){return u.a.createElement("div",null,u.a.createElement("span",null,e.person.name,e.person.number,u.a.createElement("button",{onClick:e.handlePersonDelete},"Delete")))},E=function(e){return u.a.createElement("div",null,e.personsToShow.map((function(n){return u.a.createElement(v,{key:n.id,person:n,handlePersonDelete:function(){return e.handlePersonDelete(n.id)}})})))},w=function(e){var n=e.message;return null===n?null:u.a.createElement("div",{className:"error"},n)},g=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],r=n[1],o=Object(a.useState)(""),l=Object(c.a)(o,2),i=l[0],s=l[1],v=Object(a.useState)(""),g=Object(c.a)(v,2),C=g[0],j=g[1],O=Object(a.useState)(""),N=Object(c.a)(O,2),T=N[0],y=N[1],D=Object(a.useState)(),P=Object(c.a)(D,2),S=P[0],k=(P[1],Object(a.useState)("Here comes error!")),F=Object(c.a)(k,2),J=F[0],L=F[1];Object(a.useEffect)((function(){f().then((function(e){r(e),L("Loaded information from server successfully."),setTimeout((function(){L(null)}),5e3)})).catch((function(){L("Could not load data from server."),setTimeout((function(){L(null)}),5e3)}))}),[]);var U=S?t:t.filter((function(e){return e.name.toLowerCase().includes(T)}));return u.a.createElement("div",null,u.a.createElement("h2",null,"Phonebook"),u.a.createElement(w,{message:J}),u.a.createElement(b,{newFilter:T,handleFilterChange:function(e){y(e.target.value)}}),u.a.createElement(p,{newName:i,newNumber:C,handleNameChange:function(e){s(e.target.value)},handleNumberChange:function(e){j(e.target.value)},addPerson:function(e){e.preventDefault();var n={name:i,number:C,id:t.length+1};function a(e,n){return n.some((function(n){return n.name===e.name}))}if(!1===a(n,t))m(n).then((function(e){r(t.concat(e))})).catch((function(){L("Could not update server."),setTimeout((function(){L(null)}),5e3)}));else if(!0===a(n,t)){if(!0===window.confirm("".concat(n.name," is already added. Replace number?"))){var u=t.find((function(e){return e.name===n.name}));h(u.id,n).then((function(e){r(t.map((function(n){return n.id!==u.id?n:e}))),L("Updated information successfully."),setTimeout((function(){L(null)}),5e3)})).catch((function(){L("Update was not successfull."),setTimeout((function(){L(null)}),5e3)}))}}s(""),j("")}}),u.a.createElement("h2",null,"Numbers"),u.a.createElement(E,{personsToShow:U,handlePersonDelete:function(e){var n=t.find((function(n){return n.id===e}));!0===window.confirm("Delete ".concat(n.name))&&d(e).then((function(){r(t.filter((function(n){return n.id!==e}))),L("Deleted information successfully."),setTimeout((function(){L(null)}),5e3)})).catch((function(){L("Person '".concat(n,"' was already removed from server")),setTimeout((function(){L(null)}),5e3)}))}}))};o.a.render(u.a.createElement(g,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.ba2fcc8c.chunk.js.map